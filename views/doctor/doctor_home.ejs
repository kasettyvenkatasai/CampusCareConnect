<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="/styles/Doctor_home.css">
    <title>Document</title>
    <style>
        #logout:hover{
            cursor: pointer;
        }
    </style>
  
</head>
<body>
    <div class="vernav">
        <div class="logo">
            <div class="userdetail">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-heart" viewBox="0 0 16 16">
                    <path d="M9 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0m-9 8c0 1 1 1 1 1h10s1 0 1-1-1-4-6-4-6 3-6 4m13.5-8.09c1.387-1.425 4.855 1.07 0 4.277-4.854-3.207-1.387-5.702 0-4.276Z"/>
                  </svg>
                <div class="textpart">
                    <p><%= createdy.split('.')[0]%></p>
                    <p id="mai"></p>
                </div>
            </div>
            <button id="logout">log out</button>
        </div>
        <div class="navbar">
            <ul>
                <li class="ele" style="padding-top: 0;border-right: 5px solid snow;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
                        <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
                    </svg>
                    <a id="doctor_home">Home</a>
                </li>
                <li class="ele">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard2-plus" viewBox="0 0 16 16">
                        <path d="M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5z"/>
                        <path d="M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5z"/>
                        <path d="M8.5 6.5a.5.5 0 0 0-1 0V8H6a.5.5 0 0 0 0 1h1.5v1.5a.5.5 0 0 0 1 0V9H10a.5.5 0 0 0 0-1H8.5z"/>
                      </svg>
                    <a id="Doctor_SS">New Bookings</a>
                </li>
                <li class="ele">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard2-pulse" viewBox="0 0 16 16">
                        <path d="M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5z"/>
                        <path d="M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5z"/>
                        <path d="M9.979 5.356a.5.5 0 0 0-.968.04L7.92 10.49l-.94-3.135a.5.5 0 0 0-.926-.08L4.69 10H4.5a.5.5 0 0 0 0 1H5a.5.5 0 0 0 .447-.276l.936-1.873 1.138 3.793a.5.5 0 0 0 .968-.04L9.58 7.51l.94 3.135A.5.5 0 0 0 11 11h.5a.5.5 0 0 0 0-1h-.128z"/>
                      </svg>
                    <a id="doctor_schedule">Schedule sessions</a>
                </li>
                <li class="ele">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-wheelchair" viewBox="0 0 16 16">
                        <path d="M12 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3m-.663 2.146a1.5 1.5 0 0 0-.47-2.115l-2.5-1.508a1.5 1.5 0 0 0-1.676.086l-2.329 1.75a.866.866 0 0 0 1.051 1.375L7.361 3.37l.922.71-2.038 2.445A4.73 4.73 0 0 0 2.628 7.67l1.064 1.065a3.25 3.25 0 0 1 4.574 4.574l1.064 1.063a4.73 4.73 0 0 0 1.09-3.998l1.043-.292-.187 2.991a.872.872 0 1 0 1.741.098l.206-4.121A1 1 0 0 0 12.224 8h-2.79zM3.023 9.48a3.25 3.25 0 0 0 4.496 4.496l1.077 1.077a4.75 4.75 0 0 1-6.65-6.65z"/>
                      </svg>
                    <a id="patients">My patients</a>
                </li>
                <li class="ele">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">
                        <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"/>
                        <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"/>
                      </svg>
                    <a id="doctor_settings">Settings</a>
                </li>
            </ul>
        </div>
        <div class="iiit" >
            <div class="userdetail" >
                <img src="/images/<%=clg%>.png" alt="">
                <div class="textpart" style="display: flex;align-items:center;">
                    <p id="college"><%=clg%></p>
                </div>
            </div>
        </div>
    </div>
    <div class="nonnavbar" >
        <div class="hornav">
            <div class="home">
                
               <p style="margin-left:37.5%;font-size: 3.5rem;">Home</p>
                
            </div>
            
            <div class="dates">
                <div class="text">
                   <div class="date">
                     <p ID="date" style="text-align: end;"></p>
                     <p id="time"></p> 
                   </div>
                   <div class="icon" style="margin-left: 10px;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-calendar-check" viewBox="0 0 16 16">
                        <path d="M10.854 7.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708 0"/>
                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
                      </svg>
                    </div>
                
                </div>
            
            
            </div>
        </div>
        <div class="welcome" style="display: flex;flex-direction:column;justify-content:space-around;" >
          
        <p><span style="font-size: 5rem;">Welcome back</span> <br> Doctor <br> Track your appointments and patient's history</p>
        <button id="appointment" style="width:20%;padding:10px 10px;margin-left:4%;">view my appointment</button>
        </div>
       
     
        <div class="nofi">
            <p>Dashboard</p>
            <div class="sessions">
                
                <div class="textpart1">
                    <div class="textdiv">
                        <p style="font-size: 30px;" id="app"><%= %></p>
                        <p style="font-size: 30px;">Total bookings</p>
                    </div>
                    
                    <div class="imgdiv">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bookmark-check-fill" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M2 15.5V2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v13.5a.5.5 0 0 1-.74.439L8 13.069l-5.26 2.87A.5.5 0 0 1 2 15.5m8.854-9.646a.5.5 0 0 0-.708-.708L7.5 7.793 6.354 6.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z"/>
                          </svg>
                    </div>
                    
                </div>
            </div>
            <div class="sessions" style="margin-top: 2%;">
                <div class="textpart1">
                    <div class="textdiv">
                        <p style="font-size: 30px;" id="tapp"><%= %></p>
                        <p style="font-size: 30px;">Today sessions</p>
                    </div>
                    
                    <div class="imgdiv">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard2-pulse-fill" viewBox="0 0 16 16">
                            <path d="M10 .5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5.5.5 0 0 1-.5.5.5.5 0 0 0-.5.5V2a.5.5 0 0 0 .5.5h5A.5.5 0 0 0 11 2v-.5a.5.5 0 0 0-.5-.5.5.5 0 0 1-.5-.5"/>
                            <path d="M4.085 1H3.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1h-.585q.084.236.085.5V2a1.5 1.5 0 0 1-1.5 1.5h-5A1.5 1.5 0 0 1 4 2v-.5q.001-.264.085-.5M9.98 5.356 11.372 10h.128a.5.5 0 0 1 0 1H11a.5.5 0 0 1-.479-.356l-.94-3.135-1.092 5.096a.5.5 0 0 1-.968.039L6.383 8.85l-.936 1.873A.5.5 0 0 1 5 11h-.5a.5.5 0 0 1 0-1h.191l1.362-2.724a.5.5 0 0 1 .926.08l.94 3.135 1.092-5.096a.5.5 0 0 1 .968-.039Z"/>
                          </svg>
                    </div>
                    
                </div>
            </div>
            
           
        </div>
        <div class="dashboard">
          <p>My upcoming bookings</p>
                <table style=" margin-top: 0%;width:100%;margin-left:8%;">
                    <tr>
                        <th>Session No</th>
                        <th> Date</th>
                        <th style="border-radius: 0px 50px 0px 0px;">Time</th>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td><% if (appointments[0]) { %>
                        <%= appointments[0].date.getDate() + "-" + appointments[0].date.getMonth() + "-"+ appointments[0].date.getFullYear()%>
                        
                    <% } else { %>
                         NA
                        <%}%>
                     </td>
                        <td><% if (appointments[0]) { %>
                            <%= appointments[0].time%>
                            
                        <% } else { %>
                            NA 
                            <%}%></td>
                    </tr>
                    <tr>
                        <td  style="border-radius: 0px 0px 0px 50px;">2</td>
                        <td><% if (appointments[1]) { %>
                            <%= appointments[1].date.getDate() + "-" + appointments[1].date.getMonth() + "-"+ appointments[1].date.getFullYear()%>
                            
                        <% } else { %>
                             NA 
                            <%}%></td>
                        <td  style="border-radius: 0px 0px 50px 0px;"><% if (appointments[1]) { %>
                            <%= appointments[1].time%>
                            
                        <% } else { %>
                             NA 
                            <%}%></td>
                    </tr>
                    
                   
                    
                </table>
            

        </div>
            
        
        
       
    </div>
    <script>
        var date = new Date();
        var month = date.getMonth()+1
        document.getElementById("date").textContent=date.getFullYear() +"-" + month +"-"+date.getDate();
        function myFunction() {
            document.getElementById("myDropdown").classList.toggle("show");
          }
          window.onclick = function(event) {
            if (!event.target.matches('.dropbtn')) {
              var dropdowns = document.getElementsByClassName("dropdown-content");
              var i;
              for (i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                  openDropdown.classList.remove('show');
                }
              }
            }
          }

          function displayTime() {
    var now = new Date();
    var hours = now.getHours();
    var minutes = now.getMinutes();
    var seconds = now.getSeconds();
    var meridiem = hours >= 12 ? "PM" : "AM";
    
    hours = hours % 12;
    hours = hours ? hours : 12;
    hours = (hours < 10 ? "0" : "") + hours;
    minutes = (minutes < 10 ? "0" : "") + minutes;
    seconds = (seconds < 10 ? "0" : "") + seconds;
    
    var timeString = hours + "." + minutes + "." + seconds + " " + meridiem;
    document.getElementById("time").textContent = timeString;
}

displayTime();
setInterval(displayTime, 1000);
document.getElementById('logout').onclick = function(){
    window.location.href='/logout'
}
         
  document.getElementById('appointment').onclick = function(){
    window.location.href='/doctor/schedule'
  }
  document.getElementById('doctor_home').onclick = function(){
    window.location.href='/doctor/home'
  }
  document.getElementById('doctor_schedule').onclick = function(){
    window.location.href='/doctor/schedule'
  }
  document.getElementById('doctor_settings').onclick = function(){
    window.location.href='/doctor/settings'
  }
  document.getElementById('Doctor_SS').onclick = function(){
    window.location.href='/doctor/schedule_sessions'
  }
  document.getElementById('patients').onclick = function(){
    window.location.href='/doctor/patients'
  }
    </script>
    <script>
        let xhr = new XMLHttpRequest()
        xhr.onreadystatechange = function(){
            if (xhr.readyState === 4 && xhr.status === 200) {
                const data = JSON.parse(xhr.responseText)
                const email = data.createdy
                const clg = data.clg
                const appointment = data.appointments
                const tapp = data.today_appointments
                document.getElementById('college').innerHTML= clg.toUpperCase()
                document.getElementById('mai').innerHTML = email
                document.getElementById('app').innerHTML = appointment.length
                document.getElementById('tapp').innerHTML = tapp.length
            }
        }
        xhr.open('GET', '/getdoctorhomedetails', true);
       xhr.send();
       console.log('sent')
    </script>
</body>
</html>